# Changelog

Все значимые изменения в проекте Simple RAG System документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и проект следует [Semantic Versioning](https://semver.org/lang/ru/).

## [0.1.0] - Unreleased

### Добавлено
- **Умное управление промптами** - новый класс `PromptManager` для структурированного создания промптов
- **Автоматическое создание заметок** - система автоматически создает новые заметки на основе ответов LLM
- **Менеджер заметок** - класс `NoteManager` для управления сохранением новых заметок
- **Структурированные ответы** - система различает найденную информацию и дополнительную информацию от LLM
- **Парсинг ответов LLM** - автоматическое определение необходимости создания новых заметок
- **Улучшенные промпты** - более структурированные промпты с разделением на блоки информации

### Изменено
- **Архитектура системы** - добавлены новые компоненты для управления промптами и заметками
- **Процесс работы** - расширен процесс обработки ответов с автоматическим созданием заметок

### Технические особенности
- **Структурированные промпты** - использование разделителей `///` для парсинга ответов
- **Автоматическое сохранение** - новые заметки сохраняются в подпапке `rag_new/`
- **Проверка дублирования** - система проверяет существование заметок с одинаковыми именами

### Ограничения версии 0.1.0
- Автоматически созданные заметки сохраняются в подпапке `rag_new/`
- Система создает заметки только при наличии дополнительной информации от LLM
- Автоматически созданные заметки могут иметь некорректные имена файлов при использовании специальных символов в вопросах
- Система не проверяет дублирование создаваемых заметок по содержимому

---

## [0.0.1] - 2025-10-01

### Добавлено
- **Базовая RAG система** - первая версия системы Retrieval-Augmented Generation
- **Автоматическая обработка Markdown файлов** - система загружает и обрабатывает все `.md` файлы из указанной директории
- **Векторный поиск с FAISS** - использование FAISS для быстрого поиска релевантных фрагментов текста
- **Интеграция с Mistral AI** - поддержка различных моделей Mistral AI для генерации ответов
- **Кэширование индекса** - сохранение построенного индекса для быстрого запуска последующих сессий
- **Интерактивный режим** - возможность задавать вопросы в командной строке
- **Гибкая конфигурация** - настройка через переменные окружения (.env файл)
- **Поддержка различных моделей Mistral AI**:
  - `mistral-tiny` - быстрая, экономичная модель
  - `mistral-small` - сбалансированная модель  
  - `mistral-medium` - более мощная модель
  - `mistral-large-latest` - самая мощная модель (по умолчанию)

### Технические особенности
- **Разбиение текста на чанки** - автоматическое разделение документов на фрагменты с перекрытием (600 слов, перекрытие 80 слов)
- **Векторные эмбеддинги** - использование модели `sentence-transformers/all-MiniLM-L6-v2` для создания векторных представлений
- **Обработка ошибок** - автоматические повторные попытки при ошибках API с задержкой
- **Сериализация данных** - сохранение индекса и документов в формате pickle для быстрого восстановления

### Структура проекта
- `main.py` - основной файл с логикой RAG системы
- `config.py` - конфигурация и настройки через Pydantic
- `base_types.py` - базовые типы данных
- `enums.py` - перечисления для моделей Mistral AI
- `req.txt` - список зависимостей Python
- `example.env` - пример файла конфигурации

### Зависимости
- **mistralai** - официальный SDK для работы с Mistral AI API
- **faiss-cpu** - библиотека для векторного поиска
- **sentence-transformers** - создание векторных эмбеддингов
- **unstructured** - обработка Markdown файлов
- **pydantic-settings** - управление конфигурацией
- **numpy** - работа с числовыми массивами

### Ограничения версии 0.0.1
- Поддержка только файлов в формате Markdown (`.md`)
- Требуется API ключ Mistral AI для работы
- Первая индексация может занять время при большом количестве документов
- Работа только с текстовым контентом
- Отсутствие веб-интерфейса (только командная строка)

### Известные проблемы
- При отсутствии релевантной информации система может генерировать ответы без контекста
- Нет валидации формата Markdown файлов
- Отсутствует обработка специальных символов в именах файлов

---

## Планы на будущие версии

### [0.2.0] - Планируется
- Добавление поддержки других форматов файлов (PDF, TXT, DOCX)
- Улучшение обработки ошибок и логирования
- Добавление метрик качества поиска
- Оптимизация производительности индексации

### [0.3.0] - Планируется  
- Веб-интерфейс для взаимодействия с системой
- API для интеграции с другими приложениями
- Поддержка множественных источников данных
- Расширенные настройки поиска и ранжирования

### [1.0.0] - Планируется
- Полная стабилизация API
- Комплексная документация для разработчиков
- Поддержка кластеризации и масштабирования
- Интеграция с популярными системами управления знаниями

